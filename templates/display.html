{% extends "base.html" %}

{% block navbar %}
<div class="collapse navbar-collapse" id="navbarResponsive">
  <ul class="navbar-nav ms-auto">
      <li class="nav-item"><a class="nav-link" href="{{url_for('member_profile_update')}}">{{member.get('name')}} <i class="fas fa-user-alt"></i></a>  </li>
      <li class="nav-item"><a class="nav-link" href="{{url_for('upload')}}">Post Opportunity</a></li>  
      <li class="nav-item"><a class="nav-link" href="{{url_for('logout')}}">Log Out</a></li>
  </ul>
</div>
{% endblock %}

{% block page_content %}

<div>
  <br><br><br>
  <form class="form-signup" action="{{url_for('search')}}" >
    <label> Field 
      <select name="field" class="form-control">
          <option value>All</option>
          {% for field in fields %}
          <option value="{{field.get('field')}}">{{field.get('field')}}</option>
          {% endfor %}
      </select>
    </label>
    <label> Type
      <select name="kind" class="form-control">
          <option value>All</option>
          <option value="internship">Internship</option>
          <option value="part-time">Part Time</option>
          <option value="fulltime">Full Time</option>
      </select>
    </label>
    <label> Experience 
      <select name="exp" class="form-control">
          <option value>Any</option>
          <option value="first-year">First Year</option>
          <option value="sophomore">Sophomore</option>
          <option value="junior">Junior</option>
          <option value="senior">Senior</option>
      </select>
    </label>
    <label> Institution 
      <select name="institution" class="form-control">
          <option value>All</option>
          {% for institution in institutions %}
          <option value="{{institution.get('institution')}}">{{institution.get('institution')}}</option>
          {% endfor %}
      </select>
    </label>
    <label> Visa Sponsorship 
      <select name="sponsorship" class="form-control">
          <option value>Any</option>
          <option value="yes">Yes</option>
          <option value="no">No</option>
          <option value="maybe">Maybe</option>
      </select>
    </label><br>
    <input type="text" placeholder="Search..." name ="search" class="search-bar" style='width: 62.5%;'>
    <button type="submit" class='btn btn-primary'><i class="fa fa-search"></i></button>
  </form>
  
<div>
  <table id="pid-list">
    <tr>
      <th>Title</th>
      <th >Field</th>
      <th>Institution</th>
      
      <th>Rate Your Experience With This Institution</th>
      <th>Average Rating</th>
      <th>Provide Comments About This Experience</th>
      <th>Comments</th>
    </tr>
    {% for opportunity in opportunities %}
    <tr data-pid={{opportunity.pid}}>
      
      <td>{{ opportunity.get('title') }}</td>
      <td>{{ opportunity.get('field') }}</td>
      <td>{{ opportunity.get('institution') }}</td>
      
      <td>
        <form method="post" action="{{url_for('rating')}}">
        <input type="hidden" name="pid" value={{opportunity.pid}}>
        
          {% for stars in range(1,6) %}
          <label class="pid-rating">{{stars}}
              <input type="radio" name="stars" value="{{stars}}"></label>
          {% endfor %}
        
        <input type="submit" value="rate this">
        </form>
    </td>

      <td>{{ opportunity.get('averageRating') }}</td>
    
     <td>
      <form method="post" action="{{url_for('comment')}}">
      <input type="hidden" name="pid" value={{opportunity.pid}}>
      
      <input type="text" placeholder="Comments about this experience..." name ="comments"></label>

      <input type="submit" value="comment">
      </form>
    </td>

    </tr>

    <td>
      <td colspan="5" style="width:100%"><p>Description</p>
    </td>


  </tr>
    {% endfor %}
  </table>
</div>
{% endblock %}

{% block footer%} {% endblock %}
