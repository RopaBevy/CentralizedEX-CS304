{% extends "base.html" %}

{% block navbar %}
<div class="collapse navbar-collapse" id="navbarResponsive">
  <ul class="navbar-nav ms-auto">
      <li class="nav-item"><a class="nav-link" href="{{url_for('member_Profile_Update', email = email)}}">{{member.get('name')}} <i class="fas fa-user-alt"></i></a>  </li>
      <li class="nav-item"><a class="nav-link" href="{{url_for('home')}}">Home</a></li>  
      <li class="nav-item"><a class="nav-link" href="{{url_for('logout')}}">Log Out</a></li>
  </ul>
</div>
{% endblock %}

{% block page_content %}

<div>
  <br><br><br>
<div class="row gx-4 gx-lg-5">
  <form class="form-signup" action="{{url_for('search')}}" >
    <label> Field 
      <select name="kind" >
          <option value>All</option>
          {% for field in fields %}
          <option value="{{field.get('field')}}">{{field.get('field')}}</option>
          {% endfor %}
      </select>
    </label>
    <label> Type
      <select name="kind" >
          <option value>All</option>
          <option value="internship">Internship</option>
          <option value="part-time">Part Time</option>
          <option value="fulltime">Full Time</option>
      </select>
    </label>
    <label> Experience 
      <select name="kind" >
          <option value>Any</option>
          <option value="first-year">First Year</option>
          <option value="sophomore">Sophomore</option>
          <option value="junior">Junior</option>
          <option value="senior">Senior</option>
      </select>
    </label>
    <label> Institution 
      <select name="kind" >
          <option value>All</option>
          {% for institution in institutions %}
          <option value="{{institution.get('institution')}}">{{institution.get('institution')}}</option>
          {% endfor %}
      </select>
    </label>
    <label> Visa Sponsorship 
      <select name="kind" >
          <option value>Any</option>
          <option value="yes">Yes</option>
          <option value="no">No</option>
          <option value="maybe">Maybe</option>
      </select>
    </label>
    <input type="text" placeholder="Search..." required name ="search">
    <button type="submit"><i class="fa fa-search"></i></button>
  </form>
</div>
  
<div>
  <table id="pid-list">
    <tr>
      <th>Title</th>
      <th >Field</th>
      <th>Institution</th>
      <!-- <th>Type</th> -->
      
      <th>Rate Your Experience With This Institution</th>
      <th>Average Rating</th>
      <!-- <th>Experience Level</th>
      <th>Visa Sponsorship</th>
      <th>Description</th>
      <th>Application Link</th> -->
    </tr>
    {% for opportunity in opportunities %}
    <tr data-pid={{opportunity.pid}}>
      
      <td>{{ opportunity.get('title') }}</td>
      <td>{{ opportunity.get('field') }}</td>
      <td>{{ opportunity.get('institution') }}</td>
      <!-- <td>{{ opportunity.get('experienceType') }}</td> -->
      
      <td><form method="post" action="{{url_for('rating')}}">
        <input type="hidden" name="pid" value={{opportunity.pid}}>
        
          {% for stars in range(1,6) %}
          <label class="pid-rating">{{stars}}
              <input type="radio" name="stars" value="{{stars}}"></label>
          {% endfor %}
        
        <input type="submit" value="rate this">
        </form>
    </td>
      <td>{{ opportunity.get('averageRating') }}</td>
      <!-- <td>{{ opportunity.get('experienceLevel') }}</td>
      <td>{{ opportunity.get('sponsorship') }}</td>
      <td>{{ opportunity.get('description') }}</td>
      <td><a href="{{ opportunity.get('appLink') }}"> Apply here</a></td> -->
    </tr>
    <tr><td colspan="5" style="width:100%"><p>Description</p>
    </td></tr>
    {% endfor %}
  </table>
</div>
{% endblock %}

{% block footer%} {% endblock %}
